"use strict";(self.webpackChunkfuriku_docs=self.webpackChunkfuriku_docs||[]).push([[376],{2403:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>t,contentTitle:()=>a,default:()=>u,frontMatter:()=>c,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"backend-architecture","title":"\ud83e\uddf1 Arquitectura General del Backend","description":"La arquitectura del backend de Furiku est\xe1 dise\xf1ada para ser limpia, modular, escalable y multitenant desde el inicio. Utiliza tecnolog\xedas modernas como Quarkus, JWT, y Hibernate Panache, asegurando alto rendimiento y una base s\xf3lida para evoluci\xf3n futura hacia microservicios.","source":"@site/docs/backend-architecture.md","sourceDirName":".","slug":"/backend-architecture","permalink":"/furiku-docs/en/docs/backend-architecture","draft":false,"unlisted":false,"editUrl":"https://github.com/furiku/furiku-docs/edit/main/docs/backend-architecture.md","tags":[],"version":"current","frontMatter":{"id":"backend-architecture","title":"\ud83e\uddf1 Arquitectura General del Backend","sidebar_label":"Arquitectura Backend"},"sidebar":"tutorialSidebar","next":{"title":"Arquitectura Multitenant","permalink":"/furiku-docs/en/docs/multitenancy"}}');var s=i(4848),d=i(8453);const c={id:"backend-architecture",title:"\ud83e\uddf1 Arquitectura General del Backend",sidebar_label:"Arquitectura Backend"},a=void 0,t={},l=[{value:"\ud83e\uddf0 Stack tecnol\xf3gico",id:"-stack-tecnol\xf3gico",level:2},{value:"\ud83d\uddc2\ufe0f Estructura de paquetes",id:"\ufe0f-estructura-de-paquetes",level:2},{value:"\ud83e\udde9 Principios clave de dise\xf1o",id:"-principios-clave-de-dise\xf1o",level:2},{value:"\ud83e\uddf1 Capas principales",id:"-capas-principales",level:2},{value:"\ud83d\udd10 Seguridad y roles",id:"-seguridad-y-roles",level:2},{value:"\ud83c\udf0d Internacionalizaci\xf3n (i18n)",id:"-internacionalizaci\xf3n-i18n",level:2},{value:"\ud83d\udd75\ufe0f Auditor\xeda y Soft Delete",id:"\ufe0f-auditor\xeda-y-soft-delete",level:2},{value:"\ud83d\udce6 Multitenancy",id:"-multitenancy",level:2},{value:"\ud83d\ude80 Preparado para microservicios",id:"-preparado-para-microservicios",level:2},{value:"\ud83e\udde0 Buenas pr\xe1cticas implementadas",id:"-buenas-pr\xe1cticas-implementadas",level:2},{value:"\ud83e\udde9 Conclusi\xf3n",id:"-conclusi\xf3n",level:2}];function o(e){const n={blockquote:"blockquote",br:"br",code:"code",h2:"h2",hr:"hr",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["La arquitectura del backend de Furiku est\xe1 dise\xf1ada para ser limpia, modular, escalable y multitenant desde el inicio. Utiliza tecnolog\xedas modernas como ",(0,s.jsx)(n.strong,{children:"Quarkus"}),", ",(0,s.jsx)(n.strong,{children:"JWT"}),", y ",(0,s.jsx)(n.strong,{children:"Hibernate Panache"}),", asegurando alto rendimiento y una base s\xf3lida para evoluci\xf3n futura hacia microservicios."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-stack-tecnol\xf3gico",children:"\ud83e\uddf0 Stack tecnol\xf3gico"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Componente"}),(0,s.jsx)(n.th,{children:"Tecnolog\xeda"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Lenguaje"}),(0,s.jsx)(n.td,{children:"Java (17+)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Framework"}),(0,s.jsx)(n.td,{children:"Quarkus"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"ORM"}),(0,s.jsx)(n.td,{children:"Hibernate Panache"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Seguridad"}),(0,s.jsx)(n.td,{children:"Quarkus Security (JWT)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Base de datos"}),(0,s.jsx)(n.td,{children:"MySQL"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Build system"}),(0,s.jsx)(n.td,{children:"Gradle"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Internacionalizaci\xf3n"}),(0,s.jsx)(n.td,{children:"Propiedades + helper"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"API"}),(0,s.jsx)(n.td,{children:"RESTful con JAX-RS"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Documentaci\xf3n"}),(0,s.jsx)(n.td,{children:"Docusaurus"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"\ufe0f-estructura-de-paquetes",children:"\ud83d\uddc2\ufe0f Estructura de paquetes"}),"\n",(0,s.jsx)(n.p,{children:"La arquitectura est\xe1 dividida por dominio de negocio:"}),"\n",(0,s.jsx)(n.p,{children:"org.furiku\n\u251c\u2500\u2500 user\n\u2502   \u251c\u2500\u2500 controller\n\u2502   \u251c\u2500\u2500 dto\n\u2502   \u251c\u2500\u2500 model\n\u2502   \u251c\u2500\u2500 repository\n\u2502   \u2514\u2500\u2500 service\n\u251c\u2500\u2500 business\n\u251c\u2500\u2500 auth\n\u251c\u2500\u2500 common\n\u2502   \u251c\u2500\u2500 audit\n\u2502   \u251c\u2500\u2500 i18n\n\u2502   \u251c\u2500\u2500 repository\n\u2502   \u2514\u2500\u2500 security\n\u2514\u2500\u2500 ..."}),"\n",(0,s.jsxs)(n.p,{children:["Cada m\xf3dulo es autocontenible y representa un ",(0,s.jsx)(n.strong,{children:"bounded context"}),", lo cual favorece la futura migraci\xf3n a microservicios."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-principios-clave-de-dise\xf1o",children:"\ud83e\udde9 Principios clave de dise\xf1o"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Modularidad:"})," cada feature est\xe1 en su propio paquete ra\xedz (",(0,s.jsx)(n.code,{children:"user"}),", ",(0,s.jsx)(n.code,{children:"business"}),", etc.)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Separaci\xf3n de capas:"})," cada m\xf3dulo tiene sus capas ",(0,s.jsx)(n.code,{children:"model"}),", ",(0,s.jsx)(n.code,{children:"service"}),", ",(0,s.jsx)(n.code,{children:"controller"}),", ",(0,s.jsx)(n.code,{children:"dto"}),", ",(0,s.jsx)(n.code,{children:"repository"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Internacionalizaci\xf3n integrada:"})," todos los mensajes usan claves ",(0,s.jsx)(n.code,{children:"MessageKeys"})," con ",(0,s.jsx)(n.code,{children:".properties"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Seguridad centralizada:"})," control de acceso con JWT y ",(0,s.jsx)(n.code,{children:"SecurityIdentity"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Multitenancy desde el dise\xf1o:"})," cada entidad tiene ",(0,s.jsx)(n.code,{children:"tenantId"})," como identificador contextual"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-capas-principales",children:"\ud83e\uddf1 Capas principales"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Capa"}),(0,s.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Model"})}),(0,s.jsxs)(n.td,{children:["Entidades JPA (",(0,s.jsx)(n.code,{children:"@Entity"}),") con auditor\xeda y soft delete"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Repository"})}),(0,s.jsxs)(n.td,{children:["Interfaces que extienden ",(0,s.jsx)(n.code,{children:"SoftDeletableRepository<T, ID>"})," para filtrar autom\xe1ticamente ",(0,s.jsx)(n.code,{children:"deleted = false"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Service"})}),(0,s.jsx)(n.td,{children:"Contiene la l\xf3gica de negocio y validaciones de seguridad contextual"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"DTO"})}),(0,s.jsx)(n.td,{children:"Objetos usados para entrada/salida de la API"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Controller"})}),(0,s.jsxs)(n.td,{children:["Define rutas expuestas mediante JAX-RS (",(0,s.jsx)(n.code,{children:"@Path"}),", ",(0,s.jsx)(n.code,{children:"@GET"}),", ",(0,s.jsx)(n.code,{children:"@POST"}),")"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Common"})}),(0,s.jsx)(n.td,{children:"C\xf3digo compartido (seguridad, helpers, internacionalizaci\xf3n, auditor\xeda)"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-seguridad-y-roles",children:"\ud83d\udd10 Seguridad y roles"}),"\n",(0,s.jsxs)(n.p,{children:["La autenticaci\xf3n se maneja mediante JWT, usando ",(0,s.jsx)(n.code,{children:"quarkus-security"}),". Los roles disponibles (",(0,s.jsx)(n.code,{children:"OWNER"}),", ",(0,s.jsx)(n.code,{children:"MANAGER"}),", ",(0,s.jsx)(n.code,{children:"STAFF"}),", ",(0,s.jsx)(n.code,{children:"CASHIER"}),") se aplican con ",(0,s.jsx)(n.code,{children:"@RolesAllowed"})," en cada controlador.",(0,s.jsx)(n.br,{}),"\n","El contexto actual se accede v\xeda:"]}),"\n",(0,s.jsx)(n.p,{children:"@Inject CurrentUser currentUser;"}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-internacionalizaci\xf3n-i18n",children:"\ud83c\udf0d Internacionalizaci\xf3n (i18n)"}),"\n",(0,s.jsx)(n.p,{children:"Todos los errores, respuestas y validaciones utilizan un sistema de internacionalizaci\xf3n con:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Clases ",(0,s.jsx)(n.code,{children:"MessageKeys"})," centralizadas"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Archivos ",(0,s.jsx)(n.code,{children:".properties"})," (",(0,s.jsx)(n.code,{children:"messages.properties"}),", ",(0,s.jsx)(n.code,{children:"messages_es.properties"}),")"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Inyecci\xf3n de ",(0,s.jsx)(n.code,{children:"MessageProvider"})," para obtener mensajes por clave"]}),"\n",(0,s.jsx)(n.p,{children:"messageProvider.get(MessageKeys.USER_ALREADY_EXISTS);"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Esto asegura que Furiku est\xe9 preparado para multiidioma desde el principio."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"\ufe0f-auditor\xeda-y-soft-delete",children:"\ud83d\udd75\ufe0f Auditor\xeda y Soft Delete"}),"\n",(0,s.jsxs)(n.p,{children:["Cada entidad importante hereda de ",(0,s.jsx)(n.code,{children:"AuditableEntity"})," que contiene:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"createdAt"}),", ",(0,s.jsx)(n.code,{children:"updatedAt"}),", ",(0,s.jsx)(n.code,{children:"deletedAt"}),", ",(0,s.jsx)(n.code,{children:"deletedBy"}),", ",(0,s.jsx)(n.code,{children:"isDeleted"})]}),"\n",(0,s.jsxs)(n.li,{children:["Campo embebido ",(0,s.jsx)(n.code,{children:"AuditMetadata"})," con: ",(0,s.jsx)(n.code,{children:"performedBy"}),", ",(0,s.jsx)(n.code,{children:"performedRole"}),", ",(0,s.jsx)(n.code,{children:"performedTenant"}),", ",(0,s.jsx)(n.code,{children:"performedAt"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Esto permite trazabilidad completa de todas las acciones."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-multitenancy",children:"\ud83d\udce6 Multitenancy"}),"\n",(0,s.jsxs)(n.p,{children:["Toda operaci\xf3n en Furiku est\xe1 contextualizada por ",(0,s.jsx)(n.code,{children:"tenantId"}),", que representa un negocio:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Cada usuario pertenece a un ",(0,s.jsx)(n.code,{children:"tenantId"})]}),"\n",(0,s.jsxs)(n.li,{children:["Cada entidad contiene un campo ",(0,s.jsx)(n.code,{children:"tenantId"})]}),"\n",(0,s.jsxs)(n.li,{children:["Toda validaci\xf3n compara ",(0,s.jsx)(n.code,{children:"currentUser.getTenantId()"})," contra el recurso objetivo"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-preparado-para-microservicios",children:"\ud83d\ude80 Preparado para microservicios"}),"\n",(0,s.jsxs)(n.p,{children:["Aunque Furiku es un backend monol\xedtico modular por ahora, su estructura est\xe1 pensada para una futura separaci\xf3n en servicios independientes.",(0,s.jsx)(n.br,{}),"\n","Cada m\xf3dulo cumple con los principios de un microservicio:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Aislado por dominio"}),"\n",(0,s.jsx)(n.li,{children:"Bajo acoplamiento"}),"\n",(0,s.jsx)(n.li,{children:"Contratos bien definidos v\xeda DTO"}),"\n",(0,s.jsx)(n.li,{children:"Validaciones propias"}),"\n",(0,s.jsx)(n.li,{children:"Independencia de repositorio y l\xf3gica"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-buenas-pr\xe1cticas-implementadas",children:"\ud83e\udde0 Buenas pr\xe1cticas implementadas"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["C\xf3digo limpio con Lombok (",(0,s.jsx)(n.code,{children:"@Builder"}),", ",(0,s.jsx)(n.code,{children:"@Getter"}),", ",(0,s.jsx)(n.code,{children:"@RequiredArgsConstructor"}),", etc.)"]}),"\n",(0,s.jsxs)(n.li,{children:["Sin uso directo de ",(0,s.jsx)(n.code,{children:"@Inject"})," innecesario"]}),"\n",(0,s.jsxs)(n.li,{children:["Validaci\xf3n contextual (",(0,s.jsx)(n.code,{children:"CurrentUser"}),") para evitar acceso cruzado"]}),"\n",(0,s.jsxs)(n.li,{children:["Logs relevantes con ",(0,s.jsx)(n.code,{children:"@Slf4j"})]}),"\n",(0,s.jsx)(n.li,{children:"Tests (a implementar) por m\xf3dulo"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-conclusi\xf3n",children:"\ud83e\udde9 Conclusi\xf3n"}),"\n",(0,s.jsxs)(n.p,{children:["La arquitectura de backend de Furiku est\xe1 lista para escalar, auditar y mantener f\xe1cilmente.",(0,s.jsx)(n.br,{}),"\n","Modular, organizada y profesional, permite que cualquier nuevo desarrollador entienda r\xe1pidamente d\xf3nde vive cada pieza del sistema."]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"\ud83e\uddf1 Este backend est\xe1 hecho para crecer. Cada l\xednea de c\xf3digo sigue el principio: \u201cescalabilidad desde el primer commit\u201d."}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>c,x:()=>a});var r=i(6540);const s={},d=r.createContext(s);function c(e){const n=r.useContext(d);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),r.createElement(d.Provider,{value:n},e.children)}}}]);